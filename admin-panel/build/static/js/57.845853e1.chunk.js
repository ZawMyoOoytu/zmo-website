"use strict";(self.webpackChunkzmo_admin_panel=self.webpackChunkzmo_admin_panel||[]).push([[57],{57:(e,a,l)=>{l.r(a),l.d(a,{default:()=>c});var s=l(43),t=l(216),r=l(332),o=l(305),i=l(594),n=l(579);const c=()=>{const{id:e}=(0,t.g)(),a=(0,t.Zp)(),[l,c]=(0,s.useState)(null),[d,m]=(0,s.useState)(!0),[g,u]=(0,s.useState)(!1),[h,b]=(0,s.useState)("");(0,s.useEffect)(()=>{e&&(async()=>{try{m(!0),console.log("\ud83d\udcd6 Fetching blog ".concat(e," for editing..."));const a=await o.hh.getById(e);if(!a.success)throw new Error(a.message||"Blog not found");c(a.data)}catch(h){console.error("\u274c Fetch error:",h),b(h.message||"Failed to load blog. Please try again.")}finally{m(!1)}})()},[e]);return d?(0,n.jsx)(i.A,{message:"Loading blog..."}):(0,n.jsx)("div",{className:"container-fluid",children:(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("div",{className:"col-12",children:[(0,n.jsx)("div",{className:"admin-page-header",children:(0,n.jsxs)("div",{className:"header-content",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Edit Blog"}),(0,n.jsxs)("p",{children:["Update blog post: ",(null===l||void 0===l?void 0:l.title)||"Untitled"]})]}),(0,n.jsx)("div",{className:"header-actions",children:(0,n.jsxs)("button",{onClick:()=>a("/blogs"),className:"btn btn-outline-secondary",disabled:g,children:[(0,n.jsx)("i",{className:"fas fa-arrow-left"})," Back to Blogs"]})})]})}),h&&(0,n.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,n.jsx)("strong",{children:"Error:"})," ",h]}),(0,n.jsx)("div",{className:"card",children:(0,n.jsx)("div",{className:"card-body",children:l&&(0,n.jsx)(r.A,{blog:l,onSubmit:async l=>{try{u(!0),b(""),console.log("\u270f\ufe0f Updating blog ".concat(e,":"),l);const s=await o.hh.update(e,l);if(!s.success)throw new Error(s.message||"Failed to update blog");console.log("\u2705 Blog updated successfully!"),alert("Blog updated successfully!"),a("/blogs")}catch(h){console.error("\u274c Update error:",h),b(h.message||"Failed to update blog. Please try again.")}finally{u(!1)}},submitting:g})})})]})})})}},332:(e,a,l)=>{l.d(a,{A:()=>o});var s=l(555),t=l(43),r=l(579);const o=e=>{let{blog:a,onSubmit:l,onCancel:o}=e;const[i,n]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[m,g]=(0,t.useState)(""),[u,h]=(0,t.useState)(null),[b,f]=(0,t.useState)(""),[_,p]=(0,t.useState)(!1),[x,j]=(0,t.useState)(!1),[v,N]=(0,t.useState)(""),[y,S]=(0,t.useState)("Admin User"),[A,F]=(0,t.useState)(5),[C,w]=(0,t.useState)([]),[E,P]=(0,t.useState)(""),[T,U]=(0,t.useState)("draft"),[k,B]=(0,t.useState)(!1),[I,q]=(0,t.useState)({});(0,t.useEffect)(()=>{a&&(n(a.title||""),d(a.content||""),g(a.imageUrl||""),f(a.imageUrl||""),N(a.excerpt||""),S(a.author||"Admin User"),F(a.readTime||5),w(a.tags||[]),U(a.status||"draft"),B(a.featured||!1))},[a]);const L=100,R=200,D=()=>{const e={};return i.trim()||(e.title="Title is required"),i.length>L&&(e.title="Title must be less than ".concat(L," characters")),v.trim()||(e.excerpt="Excerpt is required"),v.length>R&&(e.excerpt="Excerpt must be less than ".concat(R," characters")),c.trim()||(e.content="Content is required"),c.length<50&&(e.content="Content must be at least 50 characters"),y.trim()||(e.author="Author is required"),(!A||A<1||A>60)&&(e.readTime="Read time must be between 1 and 60 minutes"),q(e),0===Object.keys(e).length},G=e=>{I[e]&&q(a=>(0,s.A)((0,s.A)({},a),{},{[e]:""}))},z=(e,a)=>"blog-form__char-count ".concat(e>a?"blog-form__char-count--warning":"");return(0,r.jsxs)("div",{className:"blog-form",children:[(0,r.jsxs)("div",{className:"blog-form__header",children:[(0,r.jsx)("h3",{className:"blog-form__title",children:a?"Edit Blog Post":"Create New Blog Post"}),(0,r.jsx)("p",{className:"blog-form__subtitle",children:a?"Update your blog post details":"Fill in the details to create a new blog post"})]}),(0,r.jsxs)("form",{className:"blog-form__form",onSubmit:async e=>{if(e.preventDefault(),console.log("\ud83d\ude80 Form submission started"),D()){console.log("\u2705 Form validation passed"),j(!0),console.log("\u23f3 Loading state set to true");try{const e={title:i.trim(),excerpt:v.trim(),content:c.trim(),author:y.trim(),readTime:parseInt(A),tags:C,status:T,featured:k,imageUrl:_?m.trim():b||""};console.log("\ud83d\udce6 Prepared blogData:",e),l&&"function"===typeof l?(await l(e),console.log("\ud83c\udf89 onSubmit completed successfully")):(console.error("\u274c onSubmit is not a function:",l),q(e=>(0,s.A)((0,s.A)({},e),{},{submit:"Form submission handler is not available."})))}catch(a){console.error("\ud83d\udca5 Error in handleSubmit:",a),q(e=>(0,s.A)((0,s.A)({},e),{},{submit:a.message||"Failed to submit form. Please try again."}))}finally{j(!1),console.log("\ud83d\udd1a Loading state set to false")}}else console.log("\u274c Form validation failed",I)},children:[(0,r.jsxs)("div",{className:"blog-form__field",children:[(0,r.jsx)("label",{className:"blog-form__label",htmlFor:"title",children:"Title *"}),(0,r.jsx)("input",{id:"title",className:"blog-form__input ".concat(I.title?"blog-form__input--error":""),type:"text",placeholder:"Enter blog post title",value:i,onChange:e=>{n(e.target.value),G("title")},required:!0}),(0,r.jsxs)("div",{className:z(i.length,L),children:[i.length,"/",L," characters"]}),I.title&&(0,r.jsx)("span",{className:"blog-form__error",children:I.title})]}),(0,r.jsxs)("div",{className:"blog-form__field",children:[(0,r.jsx)("label",{className:"blog-form__label",htmlFor:"excerpt",children:"Excerpt *"}),(0,r.jsx)("textarea",{id:"excerpt",className:"blog-form__textarea ".concat(I.excerpt?"blog-form__input--error":""),placeholder:"Brief description of your post",value:v,onChange:e=>{N(e.target.value),G("excerpt")},rows:"3",required:!0}),(0,r.jsxs)("div",{className:z(v.length,R),children:[v.length,"/",R," characters"]}),I.excerpt&&(0,r.jsx)("span",{className:"blog-form__error",children:I.excerpt})]}),(0,r.jsxs)("div",{className:"blog-form__field",children:[(0,r.jsx)("label",{className:"blog-form__label",htmlFor:"content",children:"Content *"}),(0,r.jsx)("textarea",{id:"content",className:"blog-form__textarea blog-form__textarea--large ".concat(I.content?"blog-form__input--error":""),placeholder:"Write your blog post content here...",value:c,onChange:e=>{d(e.target.value),G("content")},rows:"8",required:!0}),(0,r.jsxs)("div",{className:"blog-form__char-count",children:[c.length," characters ",c.length<50&&"(minimum 50 required)"]}),I.content&&(0,r.jsx)("span",{className:"blog-form__error",children:I.content})]}),(0,r.jsxs)("div",{className:"blog-form__row",children:[(0,r.jsxs)("div",{className:"blog-form__field blog-form__field--half",children:[(0,r.jsx)("label",{className:"blog-form__label",htmlFor:"author",children:"Author *"}),(0,r.jsx)("input",{id:"author",className:"blog-form__input ".concat(I.author?"blog-form__input--error":""),type:"text",placeholder:"Author name",value:y,onChange:e=>{S(e.target.value),G("author")},required:!0}),I.author&&(0,r.jsx)("span",{className:"blog-form__error",children:I.author})]}),(0,r.jsxs)("div",{className:"blog-form__field blog-form__field--half",children:[(0,r.jsx)("label",{className:"blog-form__label",htmlFor:"readTime",children:"Read Time (minutes) *"}),(0,r.jsx)("input",{id:"readTime",className:"blog-form__input ".concat(I.readTime?"blog-form__input--error":""),type:"number",min:"1",max:"60",placeholder:"5",value:A,onChange:e=>{F(e.target.value),G("readTime")},required:!0}),I.readTime&&(0,r.jsx)("span",{className:"blog-form__error",children:I.readTime})]})]}),(0,r.jsxs)("div",{className:"blog-form__field",children:[(0,r.jsx)("label",{className:"blog-form__label",children:"Tags"}),(0,r.jsxs)("div",{className:"blog-form__tags-input",children:[C.map(e=>(0,r.jsxs)("span",{className:"blog-form__tag",children:[e,(0,r.jsx)("button",{type:"button",className:"blog-form__tag-remove",onClick:()=>{return a=e,void w(e=>e.filter(e=>e!==a));var a},children:"\xd7"})]},e)),(0,r.jsx)("input",{type:"text",className:"blog-form__tag-input",value:E,onChange:e=>{P(e.target.value),I.tags&&q(e=>(0,s.A)((0,s.A)({},e),{},{tags:""}))},onKeyDown:e=>{if("Enter"===e.key&&E.trim()){e.preventDefault();const a=E.trim().toLowerCase();C.includes(a)||w(e=>[...e,a]),P("")}},placeholder:"Type a tag and press Enter"})]}),(0,r.jsx)("div",{className:"blog-form__char-count",children:"Press Enter to add tags"}),I.tags&&(0,r.jsx)("span",{className:"blog-form__error",children:I.tags})]}),(0,r.jsxs)("div",{className:"blog-form__row",children:[(0,r.jsxs)("div",{className:"blog-form__field blog-form__field--half",children:[(0,r.jsx)("label",{className:"blog-form__label",htmlFor:"status",children:"Status *"}),(0,r.jsxs)("select",{id:"status",className:"blog-form__select",value:T,onChange:e=>U(e.target.value),children:[(0,r.jsx)("option",{value:"draft",children:"Draft"}),(0,r.jsx)("option",{value:"published",children:"Published"})]})]}),(0,r.jsxs)("div",{className:"blog-form__field blog-form__field--half",children:[(0,r.jsx)("label",{className:"blog-form__label",htmlFor:"featured",children:"Featured Post"}),(0,r.jsxs)("select",{id:"featured",className:"blog-form__select",value:k?"yes":"no",onChange:e=>B("yes"===e.target.value),children:[(0,r.jsx)("option",{value:"no",children:"No"}),(0,r.jsx)("option",{value:"yes",children:"Yes"})]})]})]}),(0,r.jsxs)("div",{className:"blog-form__field",children:[(0,r.jsx)("label",{className:"blog-form__label",children:"Featured Image"}),b&&(0,r.jsxs)("div",{className:"blog-form__image-preview",children:[(0,r.jsx)("img",{src:b,alt:"Preview",className:"blog-form__image",onError:e=>{e.target.style.display="none",q(e=>(0,s.A)((0,s.A)({},e),{},{image:"Failed to load image from URL"}))}}),(0,r.jsx)("button",{type:"button",className:"blog-form__image-remove",onClick:()=>{h(null),g(""),f(""),p(!1),q(e=>(0,s.A)((0,s.A)({},e),{},{image:""}));const e=document.getElementById("image-upload");e&&(e.value="")},children:"Remove Image"})]}),(0,r.jsxs)("div",{className:"blog-form__upload-method",children:[(0,r.jsxs)("label",{className:"blog-form__radio-label",children:[(0,r.jsx)("input",{type:"radio",name:"uploadMethod",checked:!_,onChange:()=>p(!1)}),"Upload Image"]}),(0,r.jsxs)("label",{className:"blog-form__radio-label",children:[(0,r.jsx)("input",{type:"radio",name:"uploadMethod",checked:_,onChange:()=>p(!0)}),"Use Image URL"]})]}),!_&&(0,r.jsxs)("div",{className:"blog-form__file-upload",children:[(0,r.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];if(a){if(!a.type.startsWith("image/"))return void q(e=>(0,s.A)((0,s.A)({},e),{},{image:"Please select an image file (JPEG, PNG, GIF, etc.)"}));if(a.size>5242880)return void q(e=>(0,s.A)((0,s.A)({},e),{},{image:"Image size should be less than 5MB"}));h(a),p(!1),q(e=>(0,s.A)((0,s.A)({},e),{},{image:""}));const e=new FileReader;e.onload=e=>{f(e.target.result)},e.readAsDataURL(a)}},className:"blog-form__file-input"}),(0,r.jsx)("label",{htmlFor:"image-upload",className:"blog-form__file-label",children:"Choose Image File"}),(0,r.jsx)("p",{className:"blog-form__file-hint",children:"Supported formats: JPEG, PNG, GIF, WebP. Max size: 5MB"})]}),_&&(0,r.jsxs)("div",{className:"blog-form__url-upload",children:[(0,r.jsx)("input",{type:"url",className:"blog-form__input",placeholder:"https://example.com/image.jpg",value:m,onChange:e=>{g(e.target.value),p(!0),h(null),q(e=>(0,s.A)((0,s.A)({},e),{},{image:""})),e.target.value?f(e.target.value):f("")}}),(0,r.jsx)("p",{className:"blog-form__url-hint",children:"Enter the full URL of the image"})]}),I.image&&(0,r.jsx)("span",{className:"blog-form__error",children:I.image})]}),I.submit&&(0,r.jsx)("div",{className:"blog-form__error blog-form__error--submit",children:I.submit}),(0,r.jsxs)("div",{className:"blog-form__actions",children:[(0,r.jsx)("button",{type:"button",className:"blog-form__button blog-form__button--secondary",onClick:o,disabled:x,children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",className:"blog-form__button blog-form__button--primary",disabled:x,children:[x&&(0,r.jsx)("span",{className:"blog-form__spinner"}),a?"Update Post":"published"===T?"Publish Now":"Save as Draft"]})]}),(0,r.jsxs)("div",{style:{padding:"15px",border:"2px dashed #4CAF50",margin:"20px 0",background:"#f0f8f0",borderRadius:"8px"},children:[(0,r.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#4CAF50"},children:"\ud83d\udc1b DEBUG INFO"}),(0,r.jsxs)("div",{style:{fontSize:"12px",fontFamily:"monospace"},children:[(0,r.jsxs)("div",{children:["Title: ",i.length,"/100"]}),(0,r.jsxs)("div",{children:["Excerpt: ",v.length,"/200"]}),(0,r.jsxs)("div",{children:["Content: ",c.length," chars"]}),(0,r.jsxs)("div",{children:["Validation: ",D()?"\u2705 PASS":"\u274c FAIL"]}),(0,r.jsxs)("div",{children:["Loading: ",x?"\u23f3 YES":"\u2705 NO"]}),(0,r.jsxs)("div",{children:["Image Preview: ",b?"\u2705 SET":"\u274c NOT SET"]}),(0,r.jsxs)("div",{children:["Tags: ",C.length," tags"]})]})]})]})]})}}}]);
//# sourceMappingURL=57.845853e1.chunk.js.map