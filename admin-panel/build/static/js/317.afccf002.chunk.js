"use strict";(self.webpackChunkzmo_admin_panel=self.webpackChunkzmo_admin_panel||[]).push([[317],{317:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var l=o(43),r=o(216),s=o(332),a=o(555);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api";let i=[{id:1,title:"Getting Started with React",excerpt:"Learn how to start with React development",content:"This is a full guide about React...",author:"Admin User",status:"published",tags:["react","javascript","frontend"],readTime:5,featured:!0,imageUrl:"",createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T10:30:00Z"}],c=2;const d={async createBlog(e){try{if(console.log("\ud83d\ude80 SERVICE: Creating blog with data:",e),console.log("\ud83c\udf10 SERVICE: API Base URL available:",n),!e.title||!e.content)return console.log("\u274c SERVICE: Validation failed - title or content missing"),{success:!1,error:"Title and content are required"};console.log("\u23f3 SERVICE: Simulating API delay..."),await new Promise(e=>setTimeout(e,800));const t={id:c++,title:e.title,excerpt:e.excerpt||"Excerpt for ".concat(e.title),content:e.content,author:e.author||"Admin User",status:e.status||"draft",tags:e.tags||[],readTime:e.readTime||5,featured:e.featured||!1,imageUrl:e.imageUrl||"",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return i.unshift(t),console.log("\u2705 SERVICE: Blog created successfully:",t),console.log("\ud83d\udcca SERVICE: Total blogs now:",i.length),{success:!0,data:t,message:"Blog created successfully"}}catch(t){return console.error("\ud83d\udca5 SERVICE: Error creating blog:",t),{success:!1,error:t.message||"Failed to create blog"}}},async getBlogs(){try{return console.log("\ud83d\udce1 SERVICE: Fetching all blogs"),await new Promise(e=>setTimeout(e,500)),{success:!0,data:i,total:i.length}}catch(e){return console.error("\ud83d\udca5 SERVICE: Error fetching blogs:",e),{success:!1,error:"Failed to fetch blogs"}}},async getBlogById(e){try{console.log("\ud83d\udce1 SERVICE: Fetching blog with ID: ".concat(e)),await new Promise(e=>setTimeout(e,300));const t=i.find(t=>t.id===parseInt(e));return t?{success:!0,data:t}:(console.log("\u274c SERVICE: Blog not found with ID: ".concat(e)),{success:!1,error:"Blog not found"})}catch(t){return console.error("\ud83d\udca5 SERVICE: Error fetching blog ".concat(e,":"),t),{success:!1,error:"Failed to fetch blog"}}},async updateBlog(e,t){try{console.log("\ud83d\udce1 SERVICE: Updating blog with ID: ".concat(e),t),await new Promise(e=>setTimeout(e,600));const o=i.findIndex(t=>t.id===parseInt(e));return-1===o?(console.log("\u274c SERVICE: Blog not found for update: ".concat(e)),{success:!1,error:"Blog not found"}):(i[o]=(0,a.A)((0,a.A)((0,a.A)({},i[o]),t),{},{updatedAt:(new Date).toISOString()}),console.log("\u2705 SERVICE: Blog updated successfully"),{success:!0,data:i[o],message:"Blog updated successfully"})}catch(o){return console.error("\ud83d\udca5 SERVICE: Error updating blog ".concat(e,":"),o),{success:!1,error:"Failed to update blog"}}},async deleteBlog(e){try{console.log("\ud83d\udce1 SERVICE: Deleting blog with ID: ".concat(e)),await new Promise(e=>setTimeout(e,400));const t=i.findIndex(t=>t.id===parseInt(e));return-1===t?(console.log("\u274c SERVICE: Blog not found for deletion: ".concat(e)),{success:!1,error:"Blog not found"}):(i.splice(t,1),console.log("\u2705 SERVICE: Blog deleted successfully"),{success:!0,message:"Blog deleted successfully"})}catch(t){return console.error("\ud83d\udca5 SERVICE: Error deleting blog ".concat(e,":"),t),{success:!1,error:"Failed to delete blog"}}},async getBlogStats(){try{console.log("\ud83d\udce1 SERVICE: Fetching blog statistics"),await new Promise(e=>setTimeout(e,300));const e=i.length,t=i.filter(e=>"published"===e.status).length,o=i.filter(e=>"draft"===e.status).length,l=i.filter(e=>e.featured).length;return console.log("\ud83d\udcca SERVICE: Stats calculated",{total:e,published:t,drafts:o,featured:l}),{success:!0,data:{total:e,published:t,drafts:o,featured:l}}}catch(e){return console.error("\ud83d\udca5 SERVICE: Error fetching stats:",e),{success:!1,error:"Failed to fetch stats"}}}};var g=o(62),m=o(579);const u=()=>{const e=(0,r.Zp)(),[t,o]=(0,l.useState)(!1),[a,n]=(0,l.useState)(""),[i,c]=(0,l.useState)("");(0,l.useEffect)(()=>{console.log("\ud83d\udd0d BlogCreate component MOUNTED"),console.log("\ud83d\udccd Current URL:",window.location.href),console.log("\ud83d\udcc1 BlogForm import:",s.A),console.log("\ud83d\udcc1 blogService import:",d),c("Component mounted successfully"),s.A?(console.log("\u2705 BlogForm import successful"),c("BlogForm loaded successfully")):(console.error("\u274c BlogForm import is NULL or UNDEFINED"),c("BlogForm import failed - check file path"))},[]);return(0,m.jsxs)("div",{className:"blog-create-page",style:{padding:"20px"},children:[(0,m.jsxs)("div",{style:{backgroundColor:"#e3f2fd",border:"2px solid #2196f3",borderRadius:"8px",padding:"15px",marginBottom:"20px"},children:[(0,m.jsx)("h3",{style:{margin:"0 0 10px 0",color:"#1976d2"},children:"\ud83d\udc1b DEBUG PANEL"}),(0,m.jsxs)("div",{style:{fontFamily:"monospace",fontSize:"14px"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Status:"})," ",i]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"BlogForm:"})," ",s.A?"\u2705 Loaded":"\u274c Missing"]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"blogService:"})," ",d?"\u2705 Loaded":"\u274c Missing"]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Loading:"})," ",t?"\u23f3 Yes":"\u2705 No"]})]})]}),(0,m.jsx)("div",{className:"page-header",style:{marginBottom:"30px"},children:(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{style:{margin:"0 0 8px 0",fontSize:"28px",color:"#333"},children:"Create New Blog Post"}),(0,m.jsx)("p",{style:{margin:0,color:"#666",fontSize:"16px"},children:"Fill in the details to create a new blog post"})]})}),a&&(0,m.jsxs)("div",{style:{padding:"16px",backgroundColor:"#f8d7da",color:"#721c24",border:"1px solid #f5c6cb",borderRadius:"8px",marginBottom:"24px",fontSize:"14px"},children:[(0,m.jsx)("strong",{children:"Error: "}),a]}),(0,m.jsx)("div",{style:{background:"white",borderRadius:"12px",padding:"32px",boxShadow:"0 2px 12px rgba(0,0,0,0.1)",border:"1px solid #e1e5e9"},children:s.A?(0,m.jsx)(s.A,{onSubmit:async t=>{console.log("\ud83d\ude80 Form submitted with data:",t),o(!0),n("");try{const o=await d.createBlog(t);console.log("\u2705 Create blog result:",o),o.success?(console.log("\ud83d\udcdd Blog created successfully, redirecting..."),e(g.b.BLOGS,{state:{message:"Blog post created successfully!"}})):(console.log("\u274c Blog creation failed:",o.error),n(o.error||"Failed to create blog post"))}catch(a){console.error("\ud83d\udca5 Error creating blog:",a),n("An unexpected error occurred. Please try again.")}finally{o(!1)}},onCancel:()=>{console.log("\ud83d\udd19 Cancel button clicked"),e(g.b.BLOGS)},loading:t}):(0,m.jsxs)("div",{style:{padding:"40px",textAlign:"center",border:"2px dashed #ff4444",borderRadius:"8px",backgroundColor:"#fff0f0"},children:[(0,m.jsx)("h2",{style:{color:"#ff4444"},children:"\u274c BlogForm Failed to Load"}),(0,m.jsx)("p",{children:"BlogForm component could not be loaded. Check:"}),(0,m.jsxs)("ul",{style:{textAlign:"left",display:"inline-block"},children:[(0,m.jsx)("li",{children:"File path: src/components/forms/BlogForm.js"}),(0,m.jsx)("li",{children:"Syntax errors in BlogForm.js"}),(0,m.jsx)("li",{children:"Browser console for errors"})]}),(0,m.jsxs)("div",{style:{marginTop:"20px",padding:"20px",border:"1px solid #ccc"},children:[(0,m.jsx)("h3",{children:"Simple Test Form"}),(0,m.jsx)("input",{type:"text",placeholder:"Test input",style:{padding:"8px",margin:"5px",width:"200px"}}),(0,m.jsx)("br",{}),(0,m.jsx)("button",{onClick:()=>alert("Test form works!"),style:{padding:"8px 16px",margin:"5px"},children:"Test Button"})]})]})}),(0,m.jsx)("button",{onClick:async()=>{if(console.log("\ud83e\uddea Testing blogService.createBlog..."),d&&d.createBlog){const e={title:"Test Blog "+Date.now(),excerpt:"Test excerpt for debugging",content:"This is test content to verify the blog creation service is working properly.",author:"Test Author",readTime:5,tags:["test","debug"],status:"draft",featured:!1,imageUrl:""};try{const t=await d.createBlog(e);console.log("\ud83e\uddea Service test result:",t),alert(t.success?"\u2705 Service works!":"\u274c Service failed: "+t.error)}catch(a){console.error("\ud83e\uddea Service test error:",a),alert("\u274c Service error: "+a.message)}}else alert("\u274c blogService.createBlog not found!")},style:{marginTop:"20px",padding:"10px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"\ud83e\uddea Test Blog Service"})]})}},332:(e,t,o)=>{o.d(t,{A:()=>a});var l=o(555),r=o(43),s=o(579);const a=e=>{let{blog:t,onSubmit:o,onCancel:a}=e;const[n,i]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[g,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(""),[b,x]=(0,r.useState)(!1),[_,j]=(0,r.useState)(!1),[v,S]=(0,r.useState)(""),[y,E]=(0,r.useState)("Admin User"),[N,C]=(0,r.useState)(5),[w,A]=(0,r.useState)([]),[B,T]=(0,r.useState)(""),[F,I]=(0,r.useState)("draft"),[R,P]=(0,r.useState)(!1),[U,k]=(0,r.useState)({});(0,r.useEffect)(()=>{t&&(i(t.title||""),d(t.content||""),m(t.imageUrl||""),f(t.imageUrl||""),S(t.excerpt||""),E(t.author||"Admin User"),C(t.readTime||5),A(t.tags||[]),I(t.status||"draft"),P(t.featured||!1))},[t]);const V=100,D=200,L=()=>{const e={};return n.trim()||(e.title="Title is required"),n.length>V&&(e.title="Title must be less than ".concat(V," characters")),v.trim()||(e.excerpt="Excerpt is required"),v.length>D&&(e.excerpt="Excerpt must be less than ".concat(D," characters")),c.trim()||(e.content="Content is required"),c.length<50&&(e.content="Content must be at least 50 characters"),y.trim()||(e.author="Author is required"),(!N||N<1||N>60)&&(e.readTime="Read time must be between 1 and 60 minutes"),k(e),0===Object.keys(e).length},O=e=>{U[e]&&k(t=>(0,l.A)((0,l.A)({},t),{},{[e]:""}))},q=(e,t)=>"blog-form__char-count ".concat(e>t?"blog-form__char-count--warning":"");return(0,s.jsxs)("div",{className:"blog-form",children:[(0,s.jsxs)("div",{className:"blog-form__header",children:[(0,s.jsx)("h3",{className:"blog-form__title",children:t?"Edit Blog Post":"Create New Blog Post"}),(0,s.jsx)("p",{className:"blog-form__subtitle",children:t?"Update your blog post details":"Fill in the details to create a new blog post"})]}),(0,s.jsxs)("form",{className:"blog-form__form",onSubmit:async e=>{if(e.preventDefault(),console.log("\ud83d\ude80 Form submission started"),L()){console.log("\u2705 Form validation passed"),j(!0),console.log("\u23f3 Loading state set to true");try{const e={title:n.trim(),excerpt:v.trim(),content:c.trim(),author:y.trim(),readTime:parseInt(N),tags:w,status:F,featured:R,imageUrl:b?g.trim():p||""};console.log("\ud83d\udce6 Prepared blogData:",e),o&&"function"===typeof o?(await o(e),console.log("\ud83c\udf89 onSubmit completed successfully")):(console.error("\u274c onSubmit is not a function:",o),k(e=>(0,l.A)((0,l.A)({},e),{},{submit:"Form submission handler is not available."})))}catch(t){console.error("\ud83d\udca5 Error in handleSubmit:",t),k(e=>(0,l.A)((0,l.A)({},e),{},{submit:t.message||"Failed to submit form. Please try again."}))}finally{j(!1),console.log("\ud83d\udd1a Loading state set to false")}}else console.log("\u274c Form validation failed",U)},children:[(0,s.jsxs)("div",{className:"blog-form__field",children:[(0,s.jsx)("label",{className:"blog-form__label",htmlFor:"title",children:"Title *"}),(0,s.jsx)("input",{id:"title",className:"blog-form__input ".concat(U.title?"blog-form__input--error":""),type:"text",placeholder:"Enter blog post title",value:n,onChange:e=>{i(e.target.value),O("title")},required:!0}),(0,s.jsxs)("div",{className:q(n.length,V),children:[n.length,"/",V," characters"]}),U.title&&(0,s.jsx)("span",{className:"blog-form__error",children:U.title})]}),(0,s.jsxs)("div",{className:"blog-form__field",children:[(0,s.jsx)("label",{className:"blog-form__label",htmlFor:"excerpt",children:"Excerpt *"}),(0,s.jsx)("textarea",{id:"excerpt",className:"blog-form__textarea ".concat(U.excerpt?"blog-form__input--error":""),placeholder:"Brief description of your post",value:v,onChange:e=>{S(e.target.value),O("excerpt")},rows:"3",required:!0}),(0,s.jsxs)("div",{className:q(v.length,D),children:[v.length,"/",D," characters"]}),U.excerpt&&(0,s.jsx)("span",{className:"blog-form__error",children:U.excerpt})]}),(0,s.jsxs)("div",{className:"blog-form__field",children:[(0,s.jsx)("label",{className:"blog-form__label",htmlFor:"content",children:"Content *"}),(0,s.jsx)("textarea",{id:"content",className:"blog-form__textarea blog-form__textarea--large ".concat(U.content?"blog-form__input--error":""),placeholder:"Write your blog post content here...",value:c,onChange:e=>{d(e.target.value),O("content")},rows:"8",required:!0}),(0,s.jsxs)("div",{className:"blog-form__char-count",children:[c.length," characters ",c.length<50&&"(minimum 50 required)"]}),U.content&&(0,s.jsx)("span",{className:"blog-form__error",children:U.content})]}),(0,s.jsxs)("div",{className:"blog-form__row",children:[(0,s.jsxs)("div",{className:"blog-form__field blog-form__field--half",children:[(0,s.jsx)("label",{className:"blog-form__label",htmlFor:"author",children:"Author *"}),(0,s.jsx)("input",{id:"author",className:"blog-form__input ".concat(U.author?"blog-form__input--error":""),type:"text",placeholder:"Author name",value:y,onChange:e=>{E(e.target.value),O("author")},required:!0}),U.author&&(0,s.jsx)("span",{className:"blog-form__error",children:U.author})]}),(0,s.jsxs)("div",{className:"blog-form__field blog-form__field--half",children:[(0,s.jsx)("label",{className:"blog-form__label",htmlFor:"readTime",children:"Read Time (minutes) *"}),(0,s.jsx)("input",{id:"readTime",className:"blog-form__input ".concat(U.readTime?"blog-form__input--error":""),type:"number",min:"1",max:"60",placeholder:"5",value:N,onChange:e=>{C(e.target.value),O("readTime")},required:!0}),U.readTime&&(0,s.jsx)("span",{className:"blog-form__error",children:U.readTime})]})]}),(0,s.jsxs)("div",{className:"blog-form__field",children:[(0,s.jsx)("label",{className:"blog-form__label",children:"Tags"}),(0,s.jsxs)("div",{className:"blog-form__tags-input",children:[w.map(e=>(0,s.jsxs)("span",{className:"blog-form__tag",children:[e,(0,s.jsx)("button",{type:"button",className:"blog-form__tag-remove",onClick:()=>{return t=e,void A(e=>e.filter(e=>e!==t));var t},children:"\xd7"})]},e)),(0,s.jsx)("input",{type:"text",className:"blog-form__tag-input",value:B,onChange:e=>{T(e.target.value),U.tags&&k(e=>(0,l.A)((0,l.A)({},e),{},{tags:""}))},onKeyDown:e=>{if("Enter"===e.key&&B.trim()){e.preventDefault();const t=B.trim().toLowerCase();w.includes(t)||A(e=>[...e,t]),T("")}},placeholder:"Type a tag and press Enter"})]}),(0,s.jsx)("div",{className:"blog-form__char-count",children:"Press Enter to add tags"}),U.tags&&(0,s.jsx)("span",{className:"blog-form__error",children:U.tags})]}),(0,s.jsxs)("div",{className:"blog-form__row",children:[(0,s.jsxs)("div",{className:"blog-form__field blog-form__field--half",children:[(0,s.jsx)("label",{className:"blog-form__label",htmlFor:"status",children:"Status *"}),(0,s.jsxs)("select",{id:"status",className:"blog-form__select",value:F,onChange:e=>I(e.target.value),children:[(0,s.jsx)("option",{value:"draft",children:"Draft"}),(0,s.jsx)("option",{value:"published",children:"Published"})]})]}),(0,s.jsxs)("div",{className:"blog-form__field blog-form__field--half",children:[(0,s.jsx)("label",{className:"blog-form__label",htmlFor:"featured",children:"Featured Post"}),(0,s.jsxs)("select",{id:"featured",className:"blog-form__select",value:R?"yes":"no",onChange:e=>P("yes"===e.target.value),children:[(0,s.jsx)("option",{value:"no",children:"No"}),(0,s.jsx)("option",{value:"yes",children:"Yes"})]})]})]}),(0,s.jsxs)("div",{className:"blog-form__field",children:[(0,s.jsx)("label",{className:"blog-form__label",children:"Featured Image"}),p&&(0,s.jsxs)("div",{className:"blog-form__image-preview",children:[(0,s.jsx)("img",{src:p,alt:"Preview",className:"blog-form__image",onError:e=>{e.target.style.display="none",k(e=>(0,l.A)((0,l.A)({},e),{},{image:"Failed to load image from URL"}))}}),(0,s.jsx)("button",{type:"button",className:"blog-form__image-remove",onClick:()=>{h(null),m(""),f(""),x(!1),k(e=>(0,l.A)((0,l.A)({},e),{},{image:""}));const e=document.getElementById("image-upload");e&&(e.value="")},children:"Remove Image"})]}),(0,s.jsxs)("div",{className:"blog-form__upload-method",children:[(0,s.jsxs)("label",{className:"blog-form__radio-label",children:[(0,s.jsx)("input",{type:"radio",name:"uploadMethod",checked:!b,onChange:()=>x(!1)}),"Upload Image"]}),(0,s.jsxs)("label",{className:"blog-form__radio-label",children:[(0,s.jsx)("input",{type:"radio",name:"uploadMethod",checked:b,onChange:()=>x(!0)}),"Use Image URL"]})]}),!b&&(0,s.jsxs)("div",{className:"blog-form__file-upload",children:[(0,s.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(!t.type.startsWith("image/"))return void k(e=>(0,l.A)((0,l.A)({},e),{},{image:"Please select an image file (JPEG, PNG, GIF, etc.)"}));if(t.size>5242880)return void k(e=>(0,l.A)((0,l.A)({},e),{},{image:"Image size should be less than 5MB"}));h(t),x(!1),k(e=>(0,l.A)((0,l.A)({},e),{},{image:""}));const e=new FileReader;e.onload=e=>{f(e.target.result)},e.readAsDataURL(t)}},className:"blog-form__file-input"}),(0,s.jsx)("label",{htmlFor:"image-upload",className:"blog-form__file-label",children:"Choose Image File"}),(0,s.jsx)("p",{className:"blog-form__file-hint",children:"Supported formats: JPEG, PNG, GIF, WebP. Max size: 5MB"})]}),b&&(0,s.jsxs)("div",{className:"blog-form__url-upload",children:[(0,s.jsx)("input",{type:"url",className:"blog-form__input",placeholder:"https://example.com/image.jpg",value:g,onChange:e=>{m(e.target.value),x(!0),h(null),k(e=>(0,l.A)((0,l.A)({},e),{},{image:""})),e.target.value?f(e.target.value):f("")}}),(0,s.jsx)("p",{className:"blog-form__url-hint",children:"Enter the full URL of the image"})]}),U.image&&(0,s.jsx)("span",{className:"blog-form__error",children:U.image})]}),U.submit&&(0,s.jsx)("div",{className:"blog-form__error blog-form__error--submit",children:U.submit}),(0,s.jsxs)("div",{className:"blog-form__actions",children:[(0,s.jsx)("button",{type:"button",className:"blog-form__button blog-form__button--secondary",onClick:a,disabled:_,children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",className:"blog-form__button blog-form__button--primary",disabled:_,children:[_&&(0,s.jsx)("span",{className:"blog-form__spinner"}),t?"Update Post":"published"===F?"Publish Now":"Save as Draft"]})]}),(0,s.jsxs)("div",{style:{padding:"15px",border:"2px dashed #4CAF50",margin:"20px 0",background:"#f0f8f0",borderRadius:"8px"},children:[(0,s.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#4CAF50"},children:"\ud83d\udc1b DEBUG INFO"}),(0,s.jsxs)("div",{style:{fontSize:"12px",fontFamily:"monospace"},children:[(0,s.jsxs)("div",{children:["Title: ",n.length,"/100"]}),(0,s.jsxs)("div",{children:["Excerpt: ",v.length,"/200"]}),(0,s.jsxs)("div",{children:["Content: ",c.length," chars"]}),(0,s.jsxs)("div",{children:["Validation: ",L()?"\u2705 PASS":"\u274c FAIL"]}),(0,s.jsxs)("div",{children:["Loading: ",_?"\u23f3 YES":"\u2705 NO"]}),(0,s.jsxs)("div",{children:["Image Preview: ",p?"\u2705 SET":"\u274c NOT SET"]}),(0,s.jsxs)("div",{children:["Tags: ",w.length," tags"]})]})]})]})]})}}}]);
//# sourceMappingURL=317.afccf002.chunk.js.map